var $jscomp={scope:{},inherits:function(b,c){function a(){}a.prototype=c.prototype;b.prototype=new a;b.prototype.constructor=b;for(var f in c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,f);e&&Object.defineProperty(b,f,e)}else b[f]=c[f]}},ParamType={Range:0,Slider:1,Value:2},State={NotPlaying:0,Playing:1},Genny=function(b,c,a){this._title=b;this._description=c;this._params=a;this._state=State.NotPlaying;this._parent=document.getElementById("col-genny-"+this._title);this._btnStart=
this._btnContainer=this._ctrlContainer=this._header=null;if(!this._parent)throw Error("col-genny-"+this._title+" does not exist");this.init();this.paramsToControls()};
Genny.prototype.init=function(){this._header=document.createElement("h2");this._header.innerHTML="["+this._title+"]";this._parent.appendChild(this._header);this._ctrlContainer=document.createElement("div");this._ctrlContainer.innerHTML="";this._ctrlContainer.classList.add("div-genny");this._ctrlContainer.style.backgroundImage="url('img/"+this._title+".jpg')";this._ctrlContainer.style.backgroundRepeat="no-repeat";this._parent.appendChild(this._ctrlContainer);this._btnStart=document.createElement("button");
this._btnStart.innerHTML="[start]";this._btnStart.onclick=this.togglePlayState.bind(this);this._btnContainer=document.createElement("div");this._btnContainer.classList.add("btn-container-genny");this._btnContainer.appendChild(this._btnStart);this._parent.appendChild(this._btnContainer)};Genny.prototype.togglePlayState=function(b){this._state==State.NotPlaying?this.start():this._state==State.Playing&&this.stop()};Genny.prototype.sanitiseId=function(b){return b.replaceAll(" ","-")};
Genny.prototype.paramsToControls=function(){this._ctrlContainer.innerHTML="";var b=document.createElement("table"),c=this;this._params.forEach(function(a,f){var e="",d=c.sanitiseId("ctrl-"+c._title+" "+a.title+" "+f);switch(a.type){case ParamType.Range:e='<tr>\n                        <td><label for="'+d+'-from">'+a.title+'</label></td>\n                        <td><input type="number" id="'+d+'-from" name="'+d+'-from" min="'+a.min+'" max="'+a.max+'" value="'+a.value+'"></td>\n                        <td><label for="'+
d+'-to"> - </label></td>\n                        <td><input type="number" id="'+d+'-to" name="'+d+'-to" min="'+a.min+'" max="'+a.max+'" value="'+a.value+'"></td>\n                    </tr>';break;case ParamType.Slider:e='<tr><td><label for="'+d+'">'+a.title+'</label></td>\n                        <td colspan="3"><input type="range" id="'+d+'" name="'+d+'" min="'+a.min+'" max="'+a.max+'" value="'+a.value+'"></td></tr>';break;case ParamType.Value:e='<tr><td><label for="'+d+'">'+a.title+'</label></td>\n                        <td colspan="3"><input type="number" id="'+
d+'" name="'+d+'" min="'+a.min+'" max="'+a.max+'" value="'+a.value+'"></td></tr>'}b.innerHTML+=e;a.id=d});this._ctrlContainer.appendChild(b)};Genny.prototype.controlsToParams=function(){this._params.forEach(function(b,c){var a=document.getElementById(b.id);switch(b.type){case ParamType.Range:b.min=a.min;b.max=a.max;break;case ParamType.Slider:b.value=a.value;break;case ParamType.Value:b.value=a.value}});console.log(this._params)};
Genny.prototype.start=function(){this.controlsToParams();this._state=State.Playing;this._btnStart.innerHTML="[stop]";this.doStart()};Genny.prototype.doStart=function(){throw Error("Abstract method 'doStart()' has not been implemented.");};Genny.prototype.stop=function(){this._state=State.NotPlaying;this._btnStart.innerHTML="[start]";this.doStop()};Genny.prototype.doStop=function(){throw Error("Abstract method 'stop()' has not been implemented.");};
var Airport=function(){Genny.call(this,"airport","Inspired by Brian Eno's Music for Airports",[{type:ParamType.Value,min:0,max:2E4,value:440,title:"note"},{type:ParamType.Slider,min:1,max:10,value:5,title:"notes"},{type:ParamType.Slider,min:1,max:100,value:10,title:"detune (cents)"},{type:ParamType.Slider,min:1,max:100,value:10,title:"reverb level"}])};$jscomp.inherits(Airport,Genny);
Airport.prototype.doStart=function(){var b=new (window.AudioContext||window.webkitAudioContext),c=b.createOscillator();c.type="sine";c.frequency.setValueAtTime(this._params[0].value,b.currentTime);c.connect(b.destination);c.start()};Airport.prototype.doStop=function(){console.log("Stopped",this);this.oscillator.stop()};
